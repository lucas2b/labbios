<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	
	<h:head>  
  		
    </h:head> 
	
<h:body>
<ui:composition template="/WEB-INF/templates/templateMain.xhtml">
	<ui:define name="content">
	    <p:panel toggleable="true">
			<h:form>
			<h:messages></h:messages>
			
			<h1>Cadastro de Solicitação</h1>
			Paciente:
			<h:selectOneMenu value="#{solicitacaoBean.solicitacaoSelecionada.PACIENTE}" id="comboPaciente" >
				<f:selectItems value="#{solicitacaoBean.comboPacientes}"></f:selectItems>
				<f:converter converterId="ConversorPaciente"></f:converter>
			</h:selectOneMenu><br></br>
			Paciente temporario: 
			<h:inputText value="#{solicitacaoBean.solicitacaoSelecionada.PACIENTE_TEMPORARIO}" id="pacienteTemporario">
				<f:converter converterId="ConversorPacienteTemporario"></f:converter>
			</h:inputText><br></br>
			Médico:
			<h:inputText value="#{solicitacaoBean.solicitacaoSelecionada.MEDICO}" id="medico">
			    <f:converter converterId="ConversorMedico"></f:converter>
			</h:inputText><br></br>
			Animal:
			<h:inputText value="#{solicitacaoBean.solicitacaoSelecionada.ANIMAL}" id="animal">
				<f:converter converterId="ConversorAnimal"></f:converter>
			</h:inputText><br></br>
			Status:
			<h:inputText value="#{solicitacaoBean.solicitacaoSelecionada.STATUS}" id="status">
				<f:converter converterId="ConversorStatus"></f:converter>
			</h:inputText><br></br>
			Observações:
			<h:inputText value="#{solicitacaoBean.solicitacaoSelecionada.SOL_OBS}" id="observacoes"></h:inputText><br></br>
			Solicitação urgente:
			<h:selectOneMenu value="#{solicitacaoBean.flagUrgente}">
				<f:selectItems value="#{solicitacaoBean.comboUrgente}"></f:selectItems>
			</h:selectOneMenu><br></br>
			<h1>Inclusão de Exames:</h1><br></br>
			
			Exame:
			<h:selectOneMenu value="#{solicitacaoBean.exameEscolhido}" onchange="submit()" id="comboExames">
				<f:selectItems value="#{solicitacaoBean.comboExames}"></f:selectItems>
				<f:converter converterId="ConversorCadastroDeExames"></f:converter>
			</h:selectOneMenu><br></br>
			
			Convênio:
			<h:selectOneMenu value="#{solicitacaoBean.convenioEscolhido}" id="comboConvenios">
				<f:selectItems value="#{solicitacaoBean.comboConvenios}"></f:selectItems>
				<f:converter converterId="ConversorConvenio"></f:converter>
			</h:selectOneMenu>			
			<br></br>
			<h:commandButton value="Adicionar Exame a solicitação" action="#{solicitacaoBean.adicionarExameASolicitacao}"></h:commandButton><br></br>
			
			<h1>Listagem de Exames:</h1>
			<h:dataTable value="#{solicitacaoBean.listaDeExames}" var="item" border="1" id="tabelaDeExames">
				<h:column>
					<f:facet name="header">
						<h:outputText value="Exame adicionado"></h:outputText>
					</f:facet>
					<h:outputText value="#{item.CAD_EXAME.CAD_EXAME_NOME}"></h:outputText>
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="Convenio"></h:outputText>
					</f:facet>
					<h:outputText value="#{item.EXAME_VALOR.CONVENIO.CONVENIO_NOME}"></h:outputText>
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="Ações"></h:outputText>
					</f:facet>
					<h:commandLink value="Resultado" action="#{entradaDeResultadosBean.inicioEntradaResultado}">
						<f:setPropertyActionListener target="#{entradaDeResultadosBean.exameSelecionado}" value="#{item}"></f:setPropertyActionListener>
					</h:commandLink>
				</h:column>
			</h:dataTable>
			<br></br>
			<h1> <h:outputText value="Controle de Pagamento: "></h:outputText> </h1><br></br>
			Desconto Percentual:
			<h:inputText value="#{solicitacaoBean.solicitacaoSelecionada.SOL_DESC_PERCENTUAL}" id="descontoPercentual">
			</h:inputText><br></br>
			Desconto em Dinheiro:
			<h:inputText value="#{solicitacaoBean.solicitacaoSelecionada.SOL_DESC_DINHEIRO}" id="descontoEmDinheiro">
			</h:inputText><br></br>
			Valor Total:
			<h:outputText value="#{solicitacaoBean.solicitacaoSelecionada.SOL_VALOR}" id="valor">
			</h:outputText><br></br>
			Valor Pago:
			<h:inputText value="#{solicitacaoBean.solicitacaoSelecionada.SOL_VALOR_PAGO}" id="valorPago">
			</h:inputText><br></br>
			
			<h:commandButton value="Gravar Solicitação" action="#{solicitacaoBean.botaoGravar}"></h:commandButton>
			<h:commandButton value="Voltar Para Listagem" action="#{solicitacaoBean.retornarListagemSolicitacoes}"></h:commandButton><br></br>
			
			</h:form>
			<br></br>
		</p:panel>
	</ui:define>
</ui:composition>
</h:body>
</html>